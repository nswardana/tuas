{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _Items = _interopRequireDefault(require(\"./items/Items\"));\n\nvar _Sidebar = _interopRequireDefault(require(\"./layout/Sidebar\"));\n\nvar _Columns = _interopRequireDefault(require(\"./columns/Columns\"));\n\nvar _GroupRows = _interopRequireDefault(require(\"./row/GroupRows\"));\n\nvar _ScrollElement = _interopRequireDefault(require(\"./scroll/ScrollElement\"));\n\nvar _MarkerCanvas = _interopRequireDefault(require(\"./markers/MarkerCanvas\"));\n\nvar _window = _interopRequireDefault(require(\"../resize-detector/window\"));\n\nvar _calendar = require(\"./utility/calendar\");\n\nvar _generic = require(\"./utility/generic\");\n\nvar _defaultConfig = require(\"./default-config\");\n\nvar _TimelineStateContext = require(\"./timeline/TimelineStateContext\");\n\nvar _TimelineMarkersContext = require(\"./markers/TimelineMarkersContext\");\n\nvar _HeadersContext = require(\"./headers/HeadersContext\");\n\nvar _TimelineHeaders = _interopRequireDefault(require(\"./headers/TimelineHeaders\"));\n\nvar _DateHeader = _interopRequireDefault(require(\"./headers/DateHeader\"));\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj[\"default\"] = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar ReactCalendarTimeline = /*#__PURE__*/function (_Component) {\n  _inherits(ReactCalendarTimeline, _Component);\n\n  _createClass(ReactCalendarTimeline, [{\n    key: \"getChildContext\",\n    value: function getChildContext() {\n      var _this2 = this;\n\n      return {\n        getTimelineContext: function getTimelineContext() {\n          return _this2.getTimelineContext();\n        }\n      };\n    }\n  }]);\n\n  function ReactCalendarTimeline(_props) {\n    var _this;\n\n    _classCallCheck(this, ReactCalendarTimeline);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ReactCalendarTimeline).call(this, _props));\n\n    _defineProperty(_assertThisInitialized(_this), \"getTimelineContext\", function () {\n      var _this$state = _this.state,\n          width = _this$state.width,\n          visibleTimeStart = _this$state.visibleTimeStart,\n          visibleTimeEnd = _this$state.visibleTimeEnd,\n          canvasTimeStart = _this$state.canvasTimeStart,\n          canvasTimeEnd = _this$state.canvasTimeEnd;\n      return {\n        timelineWidth: width,\n        visibleTimeStart: visibleTimeStart,\n        visibleTimeEnd: visibleTimeEnd,\n        canvasTimeStart: canvasTimeStart,\n        canvasTimeEnd: canvasTimeEnd\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getTimelineUnit\", function () {\n      var _this$state2 = _this.state,\n          width = _this$state2.width,\n          visibleTimeStart = _this$state2.visibleTimeStart,\n          visibleTimeEnd = _this$state2.visibleTimeEnd;\n      var timeSteps = _this.props.timeSteps;\n      var zoom = visibleTimeEnd - visibleTimeStart;\n      var minUnit = (0, _calendar.getMinUnit)(zoom, width, timeSteps);\n      return minUnit;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resize\", function () {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.props;\n\n      var _this$container$getBo = _this.container.getBoundingClientRect(),\n          containerWidth = _this$container$getBo.width;\n\n      var width = containerWidth - props.sidebarWidth - props.rightSidebarWidth;\n      var canvasWidth = (0, _calendar.getCanvasWidth)(width, props.buffer);\n\n      var _stackTimelineItems = (0, _calendar.stackTimelineItems)(props.items, props.groups, canvasWidth, _this.state.canvasTimeStart, _this.state.canvasTimeEnd, props.keys, props.lineHeight, props.itemHeightRatio, props.stackItems, _this.state.draggingItem, _this.state.resizingItem, _this.state.dragTime, _this.state.resizingEdge, _this.state.resizeTime, _this.state.newGroupOrder),\n          dimensionItems = _stackTimelineItems.dimensionItems,\n          height = _stackTimelineItems.height,\n          groupHeights = _stackTimelineItems.groupHeights,\n          groupTops = _stackTimelineItems.groupTops; // this is needed by dragItem since it uses pageY from the drag events\n      // if this was in the context of the scrollElement, this would not be necessary\n\n\n      _this.setState({\n        width: width,\n        dimensionItems: dimensionItems,\n        height: height,\n        groupHeights: groupHeights,\n        groupTops: groupTops\n      }); //initial scroll left is the buffer - 1 (1 is visible area) divided by 2 (2 is the buffer split on the right and left of the timeline)\n\n\n      var scrollLeft = width * ((props.buffer - 1) / 2);\n      _this.scrollComponent.scrollLeft = scrollLeft;\n      _this.scrollHeaderRef.scrollLeft = scrollLeft;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onScroll\", function (scrollX) {\n      var width = _this.state.width;\n      var canvasTimeStart = _this.state.canvasTimeStart;\n      var zoom = _this.state.visibleTimeEnd - _this.state.visibleTimeStart;\n      var visibleTimeStart = canvasTimeStart + zoom * scrollX / width;\n\n      if (_this.state.visibleTimeStart !== visibleTimeStart || _this.state.visibleTimeEnd !== visibleTimeStart + zoom) {\n        _this.props.onTimeChange(visibleTimeStart, visibleTimeStart + zoom, _this.updateScrollCanvas, _this.getTimelineUnit());\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateScrollCanvas\", function (visibleTimeStart, visibleTimeEnd, forceUpdateDimensions) {\n      var items = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : _this.props.items;\n      var groups = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : _this.props.groups;\n\n      _this.setState((0, _calendar.calculateScrollCanvas)(visibleTimeStart, visibleTimeEnd, forceUpdateDimensions, items, groups, _this.props, _this.state));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWheelZoom\", function (speed, xPosition, deltaY) {\n      _this.changeZoom(1.0 + speed * deltaY / 500, xPosition / _this.state.width);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeZoom\", function (scale) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.5;\n      var _this$props = _this.props,\n          minZoom = _this$props.minZoom,\n          maxZoom = _this$props.maxZoom;\n      var oldZoom = _this.state.visibleTimeEnd - _this.state.visibleTimeStart;\n      var newZoom = Math.min(Math.max(Math.round(oldZoom * scale), minZoom), maxZoom); // min 1 min, max 20 years\n\n      var newVisibleTimeStart = Math.round(_this.state.visibleTimeStart + (oldZoom - newZoom) * offset);\n\n      _this.props.onTimeChange(newVisibleTimeStart, newVisibleTimeStart + newZoom, _this.updateScrollCanvas, _this.getTimelineUnit());\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showPeriod\", function (from, to) {\n      var visibleTimeStart = from.valueOf();\n      var visibleTimeEnd = to.valueOf();\n      var zoom = visibleTimeEnd - visibleTimeStart; // can't zoom in more than to show one hour\n\n      if (zoom < _this.props.minZoom) {\n        return;\n      }\n\n      _this.props.onTimeChange(visibleTimeStart, visibleTimeStart + zoom, _this.updateScrollCanvas, _this.getTimelineUnit());\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectItem\", function (item, clickType, e) {\n      if (_this.isItemSelected(item) || _this.props.itemTouchSendsClick && clickType === 'touch') {\n        if (item && _this.props.onItemClick) {\n          var time = _this.timeFromItemEvent(e);\n\n          _this.props.onItemClick(item, e, time);\n        }\n      } else {\n        _this.setState({\n          selectedItem: item\n        });\n\n        if (item && _this.props.onItemSelect) {\n          var _time = _this.timeFromItemEvent(e);\n\n          _this.props.onItemSelect(item, e, _time);\n        } else if (item === null && _this.props.onItemDeselect) {\n          _this.props.onItemDeselect(e); // this isnt in the docs. Is this function even used?\n\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"doubleClickItem\", function (item, e) {\n      if (_this.props.onItemDoubleClick) {\n        var time = _this.timeFromItemEvent(e);\n\n        _this.props.onItemDoubleClick(item, e, time);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"contextMenuClickItem\", function (item, e) {\n      if (_this.props.onItemContextMenu) {\n        var time = _this.timeFromItemEvent(e);\n\n        _this.props.onItemContextMenu(item, e, time);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getTimeFromRowClickEvent\", function (e) {\n      var _this$props2 = _this.props,\n          dragSnap = _this$props2.dragSnap,\n          buffer = _this$props2.buffer;\n      var _this$state3 = _this.state,\n          width = _this$state3.width,\n          canvasTimeStart = _this$state3.canvasTimeStart,\n          canvasTimeEnd = _this$state3.canvasTimeEnd; // this gives us distance from left of row element, so event is in\n      // context of the row element, not client or page\n\n      var offsetX = e.nativeEvent.offsetX;\n      var time = (0, _calendar.calculateTimeForXPosition)(canvasTimeStart, canvasTimeEnd, (0, _calendar.getCanvasWidth)(width, buffer), offsetX);\n      time = Math.floor(time / dragSnap) * dragSnap;\n      return time;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"timeFromItemEvent\", function (e) {\n      var _this$state4 = _this.state,\n          width = _this$state4.width,\n          visibleTimeStart = _this$state4.visibleTimeStart,\n          visibleTimeEnd = _this$state4.visibleTimeEnd;\n      var dragSnap = _this.props.dragSnap;\n      var scrollComponent = _this.scrollComponent;\n\n      var _scrollComponent$getB = scrollComponent.getBoundingClientRect(),\n          scrollX = _scrollComponent$getB.left;\n\n      var xRelativeToTimeline = e.clientX - scrollX;\n      var relativeItemPosition = xRelativeToTimeline / width;\n      var zoom = visibleTimeEnd - visibleTimeStart;\n      var timeOffset = relativeItemPosition * zoom;\n      var time = Math.round(visibleTimeStart + timeOffset);\n      time = Math.floor(time / dragSnap) * dragSnap;\n      return time;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"dragItem\", function (item, dragTime, newGroupOrder) {\n      var newGroup = _this.props.groups[newGroupOrder];\n      var keys = _this.props.keys;\n\n      _this.setState({\n        draggingItem: item,\n        dragTime: dragTime,\n        newGroupOrder: newGroupOrder,\n        dragGroupTitle: newGroup ? (0, _generic._get)(newGroup, keys.groupLabelKey) : ''\n      });\n\n      _this.updatingItem({\n        eventType: 'move',\n        itemId: item,\n        time: dragTime,\n        newGroupOrder: newGroupOrder\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"dropItem\", function (item, dragTime, newGroupOrder) {\n      _this.setState({\n        draggingItem: null,\n        dragTime: null,\n        dragGroupTitle: null\n      });\n\n      if (_this.props.onItemMove) {\n        _this.props.onItemMove(item, dragTime, newGroupOrder);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resizingItem\", function (item, resizeTime, edge) {\n      _this.setState({\n        resizingItem: item,\n        resizingEdge: edge,\n        resizeTime: resizeTime\n      });\n\n      _this.updatingItem({\n        eventType: 'resize',\n        itemId: item,\n        time: resizeTime,\n        edge: edge\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resizedItem\", function (item, resizeTime, edge, timeDelta) {\n      _this.setState({\n        resizingItem: null,\n        resizingEdge: null,\n        resizeTime: null\n      });\n\n      if (_this.props.onItemResize && timeDelta !== 0) {\n        _this.props.onItemResize(item, resizeTime, edge);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updatingItem\", function (_ref) {\n      var eventType = _ref.eventType,\n          itemId = _ref.itemId,\n          time = _ref.time,\n          edge = _ref.edge,\n          newGroupOrder = _ref.newGroupOrder;\n\n      if (_this.props.onItemDrag) {\n        _this.props.onItemDrag({\n          eventType: eventType,\n          itemId: itemId,\n          time: time,\n          edge: edge,\n          newGroupOrder: newGroupOrder\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleRowClick\", function (e, rowIndex) {\n      // shouldnt this be handled by the user, as far as when to deselect an item?\n      if (_this.hasSelectedItem()) {\n        _this.selectItem(null);\n      }\n\n      if (_this.props.onCanvasClick == null) return;\n\n      var time = _this.getTimeFromRowClickEvent(e);\n\n      var groupId = (0, _generic._get)(_this.props.groups[rowIndex], _this.props.keys.groupIdKey);\n\n      _this.props.onCanvasClick(groupId, time, e);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleRowDoubleClick\", function (e, rowIndex) {\n      if (_this.props.onCanvasDoubleClick == null) return;\n\n      var time = _this.getTimeFromRowClickEvent(e);\n\n      var groupId = (0, _generic._get)(_this.props.groups[rowIndex], _this.props.keys.groupIdKey);\n\n      _this.props.onCanvasDoubleClick(groupId, time, e);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleScrollContextMenu\", function (e, rowIndex) {\n      if (_this.props.onCanvasContextMenu == null) return;\n\n      var timePosition = _this.getTimeFromRowClickEvent(e);\n\n      var groupId = (0, _generic._get)(_this.props.groups[rowIndex], _this.props.keys.groupIdKey);\n\n      if (_this.props.onCanvasContextMenu) {\n        e.preventDefault();\n\n        _this.props.onCanvasContextMenu(groupId, timePosition, e);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleHeaderRef\", function (el) {\n      _this.scrollHeaderRef = el;\n\n      _this.props.headerRef(el);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isTimelineHeader\", function (child) {\n      if (child.type === undefined) return false;\n      return child.type.secretKey === _TimelineHeaders[\"default\"].secretKey;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderHeaders\", function () {\n      if (_this.props.children) {\n        var headerRenderer;\n\n        _react[\"default\"].Children.map(_this.props.children, function (child) {\n          if (_this.isTimelineHeader(child)) {\n            headerRenderer = child;\n          }\n        });\n\n        if (headerRenderer) {\n          return headerRenderer;\n        }\n      }\n\n      return _react[\"default\"].createElement(_TimelineHeaders[\"default\"], null, _react[\"default\"].createElement(_DateHeader[\"default\"], {\n        unit: \"primaryHeader\"\n      }), _react[\"default\"].createElement(_DateHeader[\"default\"], null));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getScrollElementRef\", function (el) {\n      _this.props.scrollRef(el);\n\n      _this.scrollComponent = el;\n    });\n\n    _this.getSelected = _this.getSelected.bind(_assertThisInitialized(_this));\n    _this.hasSelectedItem = _this.hasSelectedItem.bind(_assertThisInitialized(_this));\n    _this.isItemSelected = _this.isItemSelected.bind(_assertThisInitialized(_this));\n    var _visibleTimeStart = null;\n    var _visibleTimeEnd = null;\n\n    if (_this.props.defaultTimeStart && _this.props.defaultTimeEnd) {\n      _visibleTimeStart = _this.props.defaultTimeStart.valueOf();\n      _visibleTimeEnd = _this.props.defaultTimeEnd.valueOf();\n    } else if (_this.props.visibleTimeStart && _this.props.visibleTimeEnd) {\n      _visibleTimeStart = _this.props.visibleTimeStart;\n      _visibleTimeEnd = _this.props.visibleTimeEnd;\n    } else {\n      //throwing an error because neither default or visible time props provided\n      throw new Error('You must provide either \"defaultTimeStart\" and \"defaultTimeEnd\" or \"visibleTimeStart\" and \"visibleTimeEnd\" to initialize the Timeline');\n    }\n\n    var _getCanvasBoundariesF = (0, _calendar.getCanvasBoundariesFromVisibleTime)(_visibleTimeStart, _visibleTimeEnd, _props.buffer),\n        _getCanvasBoundariesF2 = _slicedToArray(_getCanvasBoundariesF, 2),\n        _canvasTimeStart = _getCanvasBoundariesF2[0],\n        _canvasTimeEnd = _getCanvasBoundariesF2[1];\n\n    _this.state = {\n      width: 1000,\n      visibleTimeStart: _visibleTimeStart,\n      visibleTimeEnd: _visibleTimeEnd,\n      canvasTimeStart: _canvasTimeStart,\n      canvasTimeEnd: _canvasTimeEnd,\n      selectedItem: null,\n      dragTime: null,\n      dragGroupTitle: null,\n      resizeTime: null,\n      resizingItem: null,\n      resizingEdge: null\n    };\n\n    var _canvasWidth = (0, _calendar.getCanvasWidth)(_this.state.width, _props.buffer);\n\n    var _stackTimelineItems2 = (0, _calendar.stackTimelineItems)(_props.items, _props.groups, _canvasWidth, _this.state.canvasTimeStart, _this.state.canvasTimeEnd, _props.keys, _props.lineHeight, _props.itemHeightRatio, _props.stackItems, _this.state.draggingItem, _this.state.resizingItem, _this.state.dragTime, _this.state.resizingEdge, _this.state.resizeTime, _this.state.newGroupOrder),\n        _dimensionItems = _stackTimelineItems2.dimensionItems,\n        _height = _stackTimelineItems2.height,\n        _groupHeights = _stackTimelineItems2.groupHeights,\n        _groupTops = _stackTimelineItems2.groupTops;\n    /* eslint-disable react/no-direct-mutation-state */\n\n\n    _this.state.dimensionItems = _dimensionItems;\n    _this.state.height = _height;\n    _this.state.groupHeights = _groupHeights;\n    _this.state.groupTops = _groupTops;\n    /* eslint-enable */\n\n    return _this;\n  }\n\n  _createClass(ReactCalendarTimeline, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.resize(this.props);\n\n      if (this.props.resizeDetector && this.props.resizeDetector.addListener) {\n        this.props.resizeDetector.addListener(this);\n      }\n\n      _window[\"default\"].addListener(this);\n\n      this.lastTouchDistance = null;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.props.resizeDetector && this.props.resizeDetector.addListener) {\n        this.props.resizeDetector.removeListener(this);\n      }\n\n      _window[\"default\"].removeListener(this);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var newZoom = this.state.visibleTimeEnd - this.state.visibleTimeStart;\n      var oldZoom = prevState.visibleTimeEnd - prevState.visibleTimeStart; // are we changing zoom? Report it!\n\n      if (this.props.onZoom && newZoom !== oldZoom) {\n        this.props.onZoom(this.getTimelineContext(), this.getTimelineUnit());\n      } // The bounds have changed? Report it!\n\n\n      if (this.props.onBoundsChange && this.state.canvasTimeStart !== prevState.canvasTimeStart) {\n        this.props.onBoundsChange(this.state.canvasTimeStart, this.state.canvasTimeStart + newZoom * 3);\n      } // Check the scroll is correct\n\n\n      var scrollLeft = Math.round(this.state.width * (this.state.visibleTimeStart - this.state.canvasTimeStart) / newZoom);\n      var componentScrollLeft = Math.round(prevState.width * (prevState.visibleTimeStart - prevState.canvasTimeStart) / oldZoom);\n\n      if (componentScrollLeft !== scrollLeft) {\n        this.scrollComponent.scrollLeft = scrollLeft;\n        this.scrollHeaderRef.scrollLeft = scrollLeft;\n      }\n    }\n  }, {\n    key: \"columns\",\n    value: function columns(canvasTimeStart, canvasTimeEnd, canvasWidth, minUnit, timeSteps, height) {\n      return _react[\"default\"].createElement(_Columns[\"default\"], {\n        canvasTimeStart: canvasTimeStart,\n        canvasTimeEnd: canvasTimeEnd,\n        canvasWidth: canvasWidth,\n        lineCount: (0, _generic._length)(this.props.groups),\n        minUnit: minUnit,\n        timeSteps: timeSteps,\n        height: height,\n        verticalLineClassNamesForTime: this.props.verticalLineClassNamesForTime\n      });\n    }\n  }, {\n    key: \"rows\",\n    value: function rows(canvasWidth, groupHeights, groups) {\n      return _react[\"default\"].createElement(_GroupRows[\"default\"], {\n        groups: groups,\n        canvasWidth: canvasWidth,\n        lineCount: (0, _generic._length)(this.props.groups),\n        groupHeights: groupHeights,\n        clickTolerance: this.props.clickTolerance,\n        onRowClick: this.handleRowClick,\n        onRowDoubleClick: this.handleRowDoubleClick,\n        horizontalLineClassNamesForGroup: this.props.horizontalLineClassNamesForGroup,\n        onRowContextClick: this.handleScrollContextMenu\n      });\n    }\n  }, {\n    key: \"items\",\n    value: function items(canvasTimeStart, zoom, canvasTimeEnd, canvasWidth, minUnit, dimensionItems, groupHeights, groupTops) {\n      return _react[\"default\"].createElement(_Items[\"default\"], {\n        canvasTimeStart: canvasTimeStart,\n        canvasTimeEnd: canvasTimeEnd,\n        canvasWidth: canvasWidth,\n        dimensionItems: dimensionItems,\n        groupTops: groupTops,\n        items: this.props.items,\n        groups: this.props.groups,\n        keys: this.props.keys,\n        selectedItem: this.state.selectedItem,\n        dragSnap: this.props.dragSnap,\n        minResizeWidth: this.props.minResizeWidth,\n        canChangeGroup: this.props.canChangeGroup,\n        canMove: this.props.canMove,\n        canResize: this.props.canResize,\n        useResizeHandle: this.props.useResizeHandle,\n        canSelect: this.props.canSelect,\n        moveResizeValidator: this.props.moveResizeValidator,\n        itemSelect: this.selectItem,\n        itemDrag: this.dragItem,\n        itemDrop: this.dropItem,\n        onItemDoubleClick: this.doubleClickItem,\n        onItemContextMenu: this.props.onItemContextMenu ? this.contextMenuClickItem : undefined,\n        itemResizing: this.resizingItem,\n        itemResized: this.resizedItem,\n        itemRenderer: this.props.itemRenderer,\n        selected: this.props.selected,\n        scrollRef: this.scrollComponent\n      });\n    }\n  }, {\n    key: \"sidebar\",\n    value: function sidebar(height, groupHeights) {\n      var sidebarWidth = this.props.sidebarWidth;\n      return sidebarWidth && _react[\"default\"].createElement(_Sidebar[\"default\"], {\n        groups: this.props.groups,\n        groupRenderer: this.props.groupRenderer,\n        keys: this.props.keys,\n        width: sidebarWidth,\n        groupHeights: groupHeights,\n        height: height\n      });\n    }\n  }, {\n    key: \"rightSidebar\",\n    value: function rightSidebar(height, groupHeights) {\n      var rightSidebarWidth = this.props.rightSidebarWidth;\n      return rightSidebarWidth && _react[\"default\"].createElement(_Sidebar[\"default\"], {\n        groups: this.props.groups,\n        keys: this.props.keys,\n        groupRenderer: this.props.groupRenderer,\n        isRightSidebar: true,\n        width: rightSidebarWidth,\n        groupHeights: groupHeights,\n        height: height\n      });\n    }\n    /**\n     * check if child of type TimelineHeader\n     * refer to for explanation https://github.com/gaearon/react-hot-loader#checking-element-types\n     */\n\n  }, {\n    key: \"childrenWithProps\",\n    value: function childrenWithProps(canvasTimeStart, canvasTimeEnd, canvasWidth, dimensionItems, groupHeights, groupTops, height, visibleTimeStart, visibleTimeEnd, minUnit, timeSteps) {\n      var _this3 = this;\n\n      if (!this.props.children) {\n        return null;\n      } // convert to an array and remove the nulls\n\n\n      var childArray = Array.isArray(this.props.children) ? this.props.children.filter(function (c) {\n        return c;\n      }) : [this.props.children];\n      var childProps = {\n        canvasTimeStart: canvasTimeStart,\n        canvasTimeEnd: canvasTimeEnd,\n        canvasWidth: canvasWidth,\n        visibleTimeStart: visibleTimeStart,\n        visibleTimeEnd: visibleTimeEnd,\n        dimensionItems: dimensionItems,\n        items: this.props.items,\n        groups: this.props.groups,\n        keys: this.props.keys,\n        groupHeights: groupHeights,\n        groupTops: groupTops,\n        selected: this.getSelected(),\n        height: height,\n        minUnit: minUnit,\n        timeSteps: timeSteps\n      };\n      return _react[\"default\"].Children.map(childArray, function (child) {\n        if (!_this3.isTimelineHeader(child)) {\n          return _react[\"default\"].cloneElement(child, childProps);\n        } else {\n          return null;\n        }\n      });\n    }\n  }, {\n    key: \"getSelected\",\n    value: function getSelected() {\n      return this.state.selectedItem && !this.props.selected ? [this.state.selectedItem] : this.props.selected || [];\n    }\n  }, {\n    key: \"hasSelectedItem\",\n    value: function hasSelectedItem() {\n      if (!Array.isArray(this.props.selected)) return !!this.state.selectedItem;\n      return this.props.selected.length > 0;\n    }\n  }, {\n    key: \"isItemSelected\",\n    value: function isItemSelected(itemId) {\n      var selectedItems = this.getSelected();\n      return selectedItems.some(function (i) {\n        return i === itemId;\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$props3 = this.props,\n          items = _this$props3.items,\n          groups = _this$props3.groups,\n          sidebarWidth = _this$props3.sidebarWidth,\n          rightSidebarWidth = _this$props3.rightSidebarWidth,\n          timeSteps = _this$props3.timeSteps,\n          traditionalZoom = _this$props3.traditionalZoom,\n          buffer = _this$props3.buffer;\n      var _this$state5 = this.state,\n          draggingItem = _this$state5.draggingItem,\n          resizingItem = _this$state5.resizingItem,\n          width = _this$state5.width,\n          visibleTimeStart = _this$state5.visibleTimeStart,\n          visibleTimeEnd = _this$state5.visibleTimeEnd,\n          canvasTimeStart = _this$state5.canvasTimeStart,\n          canvasTimeEnd = _this$state5.canvasTimeEnd;\n      var _this$state6 = this.state,\n          dimensionItems = _this$state6.dimensionItems,\n          height = _this$state6.height,\n          groupHeights = _this$state6.groupHeights,\n          groupTops = _this$state6.groupTops;\n      var zoom = visibleTimeEnd - visibleTimeStart;\n      var canvasWidth = (0, _calendar.getCanvasWidth)(width, buffer);\n      var minUnit = (0, _calendar.getMinUnit)(zoom, width, timeSteps);\n      var isInteractingWithItem = !!draggingItem || !!resizingItem;\n\n      if (isInteractingWithItem) {\n        var stackResults = (0, _calendar.stackTimelineItems)(items, groups, canvasWidth, this.state.canvasTimeStart, this.state.canvasTimeEnd, this.props.keys, this.props.lineHeight, this.props.itemHeightRatio, this.props.stackItems, this.state.draggingItem, this.state.resizingItem, this.state.dragTime, this.state.resizingEdge, this.state.resizeTime, this.state.newGroupOrder);\n        dimensionItems = stackResults.dimensionItems;\n        height = stackResults.height;\n        groupHeights = stackResults.groupHeights;\n        groupTops = stackResults.groupTops;\n      }\n\n      var outerComponentStyle = {\n        height: \"\".concat(height, \"px\")\n      };\n      return _react[\"default\"].createElement(_TimelineStateContext.TimelineStateProvider, {\n        visibleTimeStart: visibleTimeStart,\n        visibleTimeEnd: visibleTimeEnd,\n        canvasTimeStart: canvasTimeStart,\n        canvasTimeEnd: canvasTimeEnd,\n        canvasWidth: canvasWidth,\n        showPeriod: this.showPeriod,\n        timelineUnit: minUnit,\n        timelineWidth: this.state.width\n      }, _react[\"default\"].createElement(_TimelineMarkersContext.TimelineMarkersProvider, null, _react[\"default\"].createElement(_HeadersContext.TimelineHeadersProvider, {\n        registerScroll: this.handleHeaderRef,\n        timeSteps: timeSteps,\n        leftSidebarWidth: this.props.sidebarWidth,\n        rightSidebarWidth: this.props.rightSidebarWidth\n      }, _react[\"default\"].createElement(\"div\", {\n        style: this.props.style,\n        ref: function ref(el) {\n          return _this4.container = el;\n        },\n        className: \"react-calendar-timeline \".concat(this.props.className)\n      }, this.renderHeaders(), _react[\"default\"].createElement(\"div\", {\n        style: outerComponentStyle,\n        className: \"rct-outer\"\n      }, sidebarWidth > 0 ? this.sidebar(height, groupHeights) : null, _react[\"default\"].createElement(_ScrollElement[\"default\"], {\n        scrollRef: this.getScrollElementRef,\n        width: width,\n        height: height,\n        onZoom: this.changeZoom,\n        onWheelZoom: this.handleWheelZoom,\n        traditionalZoom: traditionalZoom,\n        onScroll: this.onScroll,\n        isInteractingWithItem: isInteractingWithItem\n      }, _react[\"default\"].createElement(_MarkerCanvas[\"default\"], null, this.columns(canvasTimeStart, canvasTimeEnd, canvasWidth, minUnit, timeSteps, height), this.rows(canvasWidth, groupHeights, groups), this.items(canvasTimeStart, zoom, canvasTimeEnd, canvasWidth, minUnit, dimensionItems, groupHeights, groupTops), this.childrenWithProps(canvasTimeStart, canvasTimeEnd, canvasWidth, dimensionItems, groupHeights, groupTops, height, visibleTimeStart, visibleTimeEnd, minUnit, timeSteps))), rightSidebarWidth > 0 ? this.rightSidebar(height, groupHeights) : null)))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var visibleTimeStart = nextProps.visibleTimeStart,\n          visibleTimeEnd = nextProps.visibleTimeEnd,\n          items = nextProps.items,\n          groups = nextProps.groups; // This is a gross hack pushing items and groups in to state only to allow\n      // For the forceUpdate check\n\n      var derivedState = {\n        items: items,\n        groups: groups // if the items or groups have changed we must re-render\n\n      };\n      var forceUpdate = items !== prevState.items || groups !== prevState.groups; // We are a controlled component\n\n      if (visibleTimeStart && visibleTimeEnd) {\n        // Get the new canvas position\n        Object.assign(derivedState, (0, _calendar.calculateScrollCanvas)(visibleTimeStart, visibleTimeEnd, forceUpdate, items, groups, nextProps, prevState));\n      } else if (forceUpdate) {\n        // Calculate new item stack position as canvas may have changed\n        var canvasWidth = (0, _calendar.getCanvasWidth)(prevState.width, nextProps.buffer);\n        Object.assign(derivedState, (0, _calendar.stackTimelineItems)(items, groups, canvasWidth, prevState.canvasTimeStart, prevState.canvasTimeEnd, nextProps.keys, nextProps.lineHeight, nextProps.itemHeightRatio, nextProps.stackItems, prevState.draggingItem, prevState.resizingItem, prevState.dragTime, prevState.resizingEdge, prevState.resizeTime, prevState.newGroupOrder));\n      }\n\n      return derivedState;\n    }\n  }]);\n\n  return ReactCalendarTimeline;\n}(_react.Component);\n\nexports[\"default\"] = ReactCalendarTimeline;\n\n_defineProperty(ReactCalendarTimeline, \"propTypes\", {\n  groups: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].array, _propTypes[\"default\"].object]).isRequired,\n  items: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].array, _propTypes[\"default\"].object]).isRequired,\n  sidebarWidth: _propTypes[\"default\"].number,\n  rightSidebarWidth: _propTypes[\"default\"].number,\n  dragSnap: _propTypes[\"default\"].number,\n  minResizeWidth: _propTypes[\"default\"].number,\n  lineHeight: _propTypes[\"default\"].number,\n  itemHeightRatio: _propTypes[\"default\"].number,\n  minZoom: _propTypes[\"default\"].number,\n  maxZoom: _propTypes[\"default\"].number,\n  buffer: _propTypes[\"default\"].number,\n  clickTolerance: _propTypes[\"default\"].number,\n  canChangeGroup: _propTypes[\"default\"].bool,\n  canMove: _propTypes[\"default\"].bool,\n  canResize: _propTypes[\"default\"].oneOf([true, false, 'left', 'right', 'both']),\n  useResizeHandle: _propTypes[\"default\"].bool,\n  canSelect: _propTypes[\"default\"].bool,\n  stackItems: _propTypes[\"default\"].bool,\n  traditionalZoom: _propTypes[\"default\"].bool,\n  itemTouchSendsClick: _propTypes[\"default\"].bool,\n  horizontalLineClassNamesForGroup: _propTypes[\"default\"].func,\n  onItemMove: _propTypes[\"default\"].func,\n  onItemResize: _propTypes[\"default\"].func,\n  onItemClick: _propTypes[\"default\"].func,\n  onItemSelect: _propTypes[\"default\"].func,\n  onItemDeselect: _propTypes[\"default\"].func,\n  onCanvasClick: _propTypes[\"default\"].func,\n  onItemDoubleClick: _propTypes[\"default\"].func,\n  onItemContextMenu: _propTypes[\"default\"].func,\n  onCanvasDoubleClick: _propTypes[\"default\"].func,\n  onCanvasContextMenu: _propTypes[\"default\"].func,\n  onZoom: _propTypes[\"default\"].func,\n  onItemDrag: _propTypes[\"default\"].func,\n  moveResizeValidator: _propTypes[\"default\"].func,\n  itemRenderer: _propTypes[\"default\"].func,\n  groupRenderer: _propTypes[\"default\"].func,\n  className: _propTypes[\"default\"].string,\n  style: _propTypes[\"default\"].object,\n  keys: _propTypes[\"default\"].shape({\n    groupIdKey: _propTypes[\"default\"].string,\n    groupTitleKey: _propTypes[\"default\"].string,\n    groupLabelKey: _propTypes[\"default\"].string,\n    groupRightTitleKey: _propTypes[\"default\"].string,\n    itemIdKey: _propTypes[\"default\"].string,\n    itemTitleKey: _propTypes[\"default\"].string,\n    itemDivTitleKey: _propTypes[\"default\"].string,\n    itemGroupKey: _propTypes[\"default\"].string,\n    itemTimeStartKey: _propTypes[\"default\"].string,\n    itemTimeEndKey: _propTypes[\"default\"].string\n  }),\n  headerRef: _propTypes[\"default\"].func,\n  scrollRef: _propTypes[\"default\"].func,\n  timeSteps: _propTypes[\"default\"].shape({\n    second: _propTypes[\"default\"].number,\n    minute: _propTypes[\"default\"].number,\n    hour: _propTypes[\"default\"].number,\n    day: _propTypes[\"default\"].number,\n    month: _propTypes[\"default\"].number,\n    year: _propTypes[\"default\"].number\n  }),\n  defaultTimeStart: _propTypes[\"default\"].object,\n  defaultTimeEnd: _propTypes[\"default\"].object,\n  visibleTimeStart: _propTypes[\"default\"].number,\n  visibleTimeEnd: _propTypes[\"default\"].number,\n  onTimeChange: _propTypes[\"default\"].func,\n  onBoundsChange: _propTypes[\"default\"].func,\n  selected: _propTypes[\"default\"].array,\n  resizeDetector: _propTypes[\"default\"].shape({\n    addListener: _propTypes[\"default\"].func,\n    removeListener: _propTypes[\"default\"].func\n  }),\n  verticalLineClassNamesForTime: _propTypes[\"default\"].func,\n  children: _propTypes[\"default\"].node\n});\n\n_defineProperty(ReactCalendarTimeline, \"defaultProps\", {\n  sidebarWidth: 150,\n  rightSidebarWidth: 0,\n  dragSnap: 1000 * 60 * 15,\n  // 15min\n  minResizeWidth: 20,\n  lineHeight: 30,\n  itemHeightRatio: 0.65,\n  buffer: 3,\n  minZoom: 60 * 60 * 1000,\n  // 1 hour\n  maxZoom: 5 * 365.24 * 86400 * 1000,\n  // 5 years\n  clickTolerance: 3,\n  // how many pixels can we drag for it to be still considered a click?\n  canChangeGroup: true,\n  canMove: true,\n  canResize: 'right',\n  useResizeHandle: false,\n  canSelect: true,\n  stackItems: false,\n  traditionalZoom: false,\n  horizontalLineClassNamesForGroup: null,\n  onItemMove: null,\n  onItemResize: null,\n  onItemClick: null,\n  onItemSelect: null,\n  onItemDeselect: null,\n  onItemDrag: null,\n  onCanvasClick: null,\n  onItemDoubleClick: null,\n  onItemContextMenu: null,\n  onZoom: null,\n  verticalLineClassNamesForTime: null,\n  moveResizeValidator: null,\n  dayBackground: null,\n  defaultTimeStart: null,\n  defaultTimeEnd: null,\n  itemTouchSendsClick: false,\n  style: {},\n  className: '',\n  keys: _defaultConfig.defaultKeys,\n  timeSteps: _defaultConfig.defaultTimeSteps,\n  headerRef: function headerRef() {},\n  scrollRef: function scrollRef() {},\n  // if you pass in visibleTimeStart and visibleTimeEnd, you must also pass onTimeChange(visibleTimeStart, visibleTimeEnd),\n  // which needs to update the props visibleTimeStart and visibleTimeEnd to the ones passed\n  visibleTimeStart: null,\n  visibleTimeEnd: null,\n  onTimeChange: function onTimeChange(visibleTimeStart, visibleTimeEnd, updateScrollCanvas) {\n    updateScrollCanvas(visibleTimeStart, visibleTimeEnd);\n  },\n  // called when the canvas area of the calendar changes\n  onBoundsChange: null,\n  children: null,\n  selected: null\n});\n\n_defineProperty(ReactCalendarTimeline, \"childContextTypes\", {\n  getTimelineContext: _propTypes[\"default\"].func\n});","map":{"version":3,"sources":["/Users/nanang/neo4J/tuas/web-react/node_modules/react-calendar-timeline/lib/lib/Timeline.js"],"names":["Object","defineProperty","exports","value","_propTypes","_interopRequireDefault","require","_react","_interopRequireWildcard","_Items","_Sidebar","_Columns","_GroupRows","_ScrollElement","_MarkerCanvas","_window","_calendar","_generic","_defaultConfig","_TimelineStateContext","_TimelineMarkersContext","_HeadersContext","_TimelineHeaders","_DateHeader","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","_typeof","Symbol","iterator","constructor","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","TypeError","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","length","err","Array","isArray","_classCallCheck","instance","Constructor","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_defineProperties","target","props","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","_setPrototypeOf","p","_defineProperty","ReactCalendarTimeline","_Component","getChildContext","_this2","getTimelineContext","_props","_this","_this$state","state","width","visibleTimeStart","visibleTimeEnd","canvasTimeStart","canvasTimeEnd","timelineWidth","_this$state2","timeSteps","zoom","minUnit","getMinUnit","arguments","_this$container$getBo","container","getBoundingClientRect","containerWidth","sidebarWidth","rightSidebarWidth","canvasWidth","getCanvasWidth","buffer","_stackTimelineItems","stackTimelineItems","items","groups","keys","lineHeight","itemHeightRatio","stackItems","draggingItem","resizingItem","dragTime","resizingEdge","resizeTime","newGroupOrder","dimensionItems","height","groupHeights","groupTops","setState","scrollLeft","scrollComponent","scrollHeaderRef","scrollX","onTimeChange","updateScrollCanvas","getTimelineUnit","forceUpdateDimensions","calculateScrollCanvas","speed","xPosition","deltaY","changeZoom","scale","offset","_this$props","minZoom","maxZoom","oldZoom","newZoom","Math","min","max","round","newVisibleTimeStart","from","to","valueOf","item","clickType","e","isItemSelected","itemTouchSendsClick","onItemClick","time","timeFromItemEvent","selectedItem","onItemSelect","_time","onItemDeselect","onItemDoubleClick","onItemContextMenu","_this$props2","dragSnap","_this$state3","offsetX","nativeEvent","calculateTimeForXPosition","floor","_this$state4","_scrollComponent$getB","left","xRelativeToTimeline","clientX","relativeItemPosition","timeOffset","newGroup","dragGroupTitle","_get","groupLabelKey","updatingItem","eventType","itemId","onItemMove","edge","timeDelta","onItemResize","_ref","onItemDrag","rowIndex","hasSelectedItem","selectItem","onCanvasClick","getTimeFromRowClickEvent","groupId","groupIdKey","onCanvasDoubleClick","onCanvasContextMenu","timePosition","preventDefault","el","headerRef","child","type","secretKey","children","headerRenderer","Children","map","isTimelineHeader","createElement","unit","scrollRef","getSelected","bind","_visibleTimeStart","_visibleTimeEnd","defaultTimeStart","defaultTimeEnd","Error","_getCanvasBoundariesF","getCanvasBoundariesFromVisibleTime","_getCanvasBoundariesF2","_canvasTimeStart","_canvasTimeEnd","_canvasWidth","_stackTimelineItems2","_dimensionItems","_height","_groupHeights","_groupTops","componentDidMount","resize","resizeDetector","addListener","lastTouchDistance","componentWillUnmount","removeListener","componentDidUpdate","prevProps","prevState","onZoom","onBoundsChange","componentScrollLeft","columns","lineCount","_length","verticalLineClassNamesForTime","rows","clickTolerance","onRowClick","handleRowClick","onRowDoubleClick","handleRowDoubleClick","horizontalLineClassNamesForGroup","onRowContextClick","handleScrollContextMenu","minResizeWidth","canChangeGroup","canMove","canResize","useResizeHandle","canSelect","moveResizeValidator","itemSelect","itemDrag","dragItem","itemDrop","dropItem","doubleClickItem","contextMenuClickItem","itemResizing","itemResized","resizedItem","itemRenderer","selected","sidebar","groupRenderer","rightSidebar","isRightSidebar","childrenWithProps","_this3","childArray","filter","c","childProps","cloneElement","selectedItems","some","render","_this4","_this$props3","traditionalZoom","_this$state5","_this$state6","isInteractingWithItem","stackResults","outerComponentStyle","concat","TimelineStateProvider","showPeriod","timelineUnit","TimelineMarkersProvider","TimelineHeadersProvider","registerScroll","handleHeaderRef","leftSidebarWidth","style","ref","className","renderHeaders","getScrollElementRef","onWheelZoom","handleWheelZoom","onScroll","getDerivedStateFromProps","nextProps","derivedState","forceUpdate","assign","Component","oneOfType","array","object","isRequired","number","bool","oneOf","func","string","shape","groupTitleKey","groupRightTitleKey","itemIdKey","itemTitleKey","itemDivTitleKey","itemGroupKey","itemTimeStartKey","itemTimeEndKey","second","minute","hour","day","month","year","node","dayBackground","defaultKeys","defaultTimeSteps"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _Items = _interopRequireDefault(require(\"./items/Items\"));\n\nvar _Sidebar = _interopRequireDefault(require(\"./layout/Sidebar\"));\n\nvar _Columns = _interopRequireDefault(require(\"./columns/Columns\"));\n\nvar _GroupRows = _interopRequireDefault(require(\"./row/GroupRows\"));\n\nvar _ScrollElement = _interopRequireDefault(require(\"./scroll/ScrollElement\"));\n\nvar _MarkerCanvas = _interopRequireDefault(require(\"./markers/MarkerCanvas\"));\n\nvar _window = _interopRequireDefault(require(\"../resize-detector/window\"));\n\nvar _calendar = require(\"./utility/calendar\");\n\nvar _generic = require(\"./utility/generic\");\n\nvar _defaultConfig = require(\"./default-config\");\n\nvar _TimelineStateContext = require(\"./timeline/TimelineStateContext\");\n\nvar _TimelineMarkersContext = require(\"./markers/TimelineMarkersContext\");\n\nvar _HeadersContext = require(\"./headers/HeadersContext\");\n\nvar _TimelineHeaders = _interopRequireDefault(require(\"./headers/TimelineHeaders\"));\n\nvar _DateHeader = _interopRequireDefault(require(\"./headers/DateHeader\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj[\"default\"] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar ReactCalendarTimeline =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ReactCalendarTimeline, _Component);\n\n  _createClass(ReactCalendarTimeline, [{\n    key: \"getChildContext\",\n    value: function getChildContext() {\n      var _this2 = this;\n\n      return {\n        getTimelineContext: function getTimelineContext() {\n          return _this2.getTimelineContext();\n        }\n      };\n    }\n  }]);\n\n  function ReactCalendarTimeline(_props) {\n    var _this;\n\n    _classCallCheck(this, ReactCalendarTimeline);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ReactCalendarTimeline).call(this, _props));\n\n    _defineProperty(_assertThisInitialized(_this), \"getTimelineContext\", function () {\n      var _this$state = _this.state,\n          width = _this$state.width,\n          visibleTimeStart = _this$state.visibleTimeStart,\n          visibleTimeEnd = _this$state.visibleTimeEnd,\n          canvasTimeStart = _this$state.canvasTimeStart,\n          canvasTimeEnd = _this$state.canvasTimeEnd;\n      return {\n        timelineWidth: width,\n        visibleTimeStart: visibleTimeStart,\n        visibleTimeEnd: visibleTimeEnd,\n        canvasTimeStart: canvasTimeStart,\n        canvasTimeEnd: canvasTimeEnd\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getTimelineUnit\", function () {\n      var _this$state2 = _this.state,\n          width = _this$state2.width,\n          visibleTimeStart = _this$state2.visibleTimeStart,\n          visibleTimeEnd = _this$state2.visibleTimeEnd;\n      var timeSteps = _this.props.timeSteps;\n      var zoom = visibleTimeEnd - visibleTimeStart;\n      var minUnit = (0, _calendar.getMinUnit)(zoom, width, timeSteps);\n      return minUnit;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resize\", function () {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.props;\n\n      var _this$container$getBo = _this.container.getBoundingClientRect(),\n          containerWidth = _this$container$getBo.width;\n\n      var width = containerWidth - props.sidebarWidth - props.rightSidebarWidth;\n      var canvasWidth = (0, _calendar.getCanvasWidth)(width, props.buffer);\n\n      var _stackTimelineItems = (0, _calendar.stackTimelineItems)(props.items, props.groups, canvasWidth, _this.state.canvasTimeStart, _this.state.canvasTimeEnd, props.keys, props.lineHeight, props.itemHeightRatio, props.stackItems, _this.state.draggingItem, _this.state.resizingItem, _this.state.dragTime, _this.state.resizingEdge, _this.state.resizeTime, _this.state.newGroupOrder),\n          dimensionItems = _stackTimelineItems.dimensionItems,\n          height = _stackTimelineItems.height,\n          groupHeights = _stackTimelineItems.groupHeights,\n          groupTops = _stackTimelineItems.groupTops; // this is needed by dragItem since it uses pageY from the drag events\n      // if this was in the context of the scrollElement, this would not be necessary\n\n\n      _this.setState({\n        width: width,\n        dimensionItems: dimensionItems,\n        height: height,\n        groupHeights: groupHeights,\n        groupTops: groupTops\n      }); //initial scroll left is the buffer - 1 (1 is visible area) divided by 2 (2 is the buffer split on the right and left of the timeline)\n\n\n      var scrollLeft = width * ((props.buffer - 1) / 2);\n      _this.scrollComponent.scrollLeft = scrollLeft;\n      _this.scrollHeaderRef.scrollLeft = scrollLeft;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onScroll\", function (scrollX) {\n      var width = _this.state.width;\n      var canvasTimeStart = _this.state.canvasTimeStart;\n      var zoom = _this.state.visibleTimeEnd - _this.state.visibleTimeStart;\n      var visibleTimeStart = canvasTimeStart + zoom * scrollX / width;\n\n      if (_this.state.visibleTimeStart !== visibleTimeStart || _this.state.visibleTimeEnd !== visibleTimeStart + zoom) {\n        _this.props.onTimeChange(visibleTimeStart, visibleTimeStart + zoom, _this.updateScrollCanvas, _this.getTimelineUnit());\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateScrollCanvas\", function (visibleTimeStart, visibleTimeEnd, forceUpdateDimensions) {\n      var items = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : _this.props.items;\n      var groups = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : _this.props.groups;\n\n      _this.setState((0, _calendar.calculateScrollCanvas)(visibleTimeStart, visibleTimeEnd, forceUpdateDimensions, items, groups, _this.props, _this.state));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleWheelZoom\", function (speed, xPosition, deltaY) {\n      _this.changeZoom(1.0 + speed * deltaY / 500, xPosition / _this.state.width);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeZoom\", function (scale) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.5;\n      var _this$props = _this.props,\n          minZoom = _this$props.minZoom,\n          maxZoom = _this$props.maxZoom;\n      var oldZoom = _this.state.visibleTimeEnd - _this.state.visibleTimeStart;\n      var newZoom = Math.min(Math.max(Math.round(oldZoom * scale), minZoom), maxZoom); // min 1 min, max 20 years\n\n      var newVisibleTimeStart = Math.round(_this.state.visibleTimeStart + (oldZoom - newZoom) * offset);\n\n      _this.props.onTimeChange(newVisibleTimeStart, newVisibleTimeStart + newZoom, _this.updateScrollCanvas, _this.getTimelineUnit());\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showPeriod\", function (from, to) {\n      var visibleTimeStart = from.valueOf();\n      var visibleTimeEnd = to.valueOf();\n      var zoom = visibleTimeEnd - visibleTimeStart; // can't zoom in more than to show one hour\n\n      if (zoom < _this.props.minZoom) {\n        return;\n      }\n\n      _this.props.onTimeChange(visibleTimeStart, visibleTimeStart + zoom, _this.updateScrollCanvas, _this.getTimelineUnit());\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectItem\", function (item, clickType, e) {\n      if (_this.isItemSelected(item) || _this.props.itemTouchSendsClick && clickType === 'touch') {\n        if (item && _this.props.onItemClick) {\n          var time = _this.timeFromItemEvent(e);\n\n          _this.props.onItemClick(item, e, time);\n        }\n      } else {\n        _this.setState({\n          selectedItem: item\n        });\n\n        if (item && _this.props.onItemSelect) {\n          var _time = _this.timeFromItemEvent(e);\n\n          _this.props.onItemSelect(item, e, _time);\n        } else if (item === null && _this.props.onItemDeselect) {\n          _this.props.onItemDeselect(e); // this isnt in the docs. Is this function even used?\n\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"doubleClickItem\", function (item, e) {\n      if (_this.props.onItemDoubleClick) {\n        var time = _this.timeFromItemEvent(e);\n\n        _this.props.onItemDoubleClick(item, e, time);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"contextMenuClickItem\", function (item, e) {\n      if (_this.props.onItemContextMenu) {\n        var time = _this.timeFromItemEvent(e);\n\n        _this.props.onItemContextMenu(item, e, time);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getTimeFromRowClickEvent\", function (e) {\n      var _this$props2 = _this.props,\n          dragSnap = _this$props2.dragSnap,\n          buffer = _this$props2.buffer;\n      var _this$state3 = _this.state,\n          width = _this$state3.width,\n          canvasTimeStart = _this$state3.canvasTimeStart,\n          canvasTimeEnd = _this$state3.canvasTimeEnd; // this gives us distance from left of row element, so event is in\n      // context of the row element, not client or page\n\n      var offsetX = e.nativeEvent.offsetX;\n      var time = (0, _calendar.calculateTimeForXPosition)(canvasTimeStart, canvasTimeEnd, (0, _calendar.getCanvasWidth)(width, buffer), offsetX);\n      time = Math.floor(time / dragSnap) * dragSnap;\n      return time;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"timeFromItemEvent\", function (e) {\n      var _this$state4 = _this.state,\n          width = _this$state4.width,\n          visibleTimeStart = _this$state4.visibleTimeStart,\n          visibleTimeEnd = _this$state4.visibleTimeEnd;\n      var dragSnap = _this.props.dragSnap;\n      var scrollComponent = _this.scrollComponent;\n\n      var _scrollComponent$getB = scrollComponent.getBoundingClientRect(),\n          scrollX = _scrollComponent$getB.left;\n\n      var xRelativeToTimeline = e.clientX - scrollX;\n      var relativeItemPosition = xRelativeToTimeline / width;\n      var zoom = visibleTimeEnd - visibleTimeStart;\n      var timeOffset = relativeItemPosition * zoom;\n      var time = Math.round(visibleTimeStart + timeOffset);\n      time = Math.floor(time / dragSnap) * dragSnap;\n      return time;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"dragItem\", function (item, dragTime, newGroupOrder) {\n      var newGroup = _this.props.groups[newGroupOrder];\n      var keys = _this.props.keys;\n\n      _this.setState({\n        draggingItem: item,\n        dragTime: dragTime,\n        newGroupOrder: newGroupOrder,\n        dragGroupTitle: newGroup ? (0, _generic._get)(newGroup, keys.groupLabelKey) : ''\n      });\n\n      _this.updatingItem({\n        eventType: 'move',\n        itemId: item,\n        time: dragTime,\n        newGroupOrder: newGroupOrder\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"dropItem\", function (item, dragTime, newGroupOrder) {\n      _this.setState({\n        draggingItem: null,\n        dragTime: null,\n        dragGroupTitle: null\n      });\n\n      if (_this.props.onItemMove) {\n        _this.props.onItemMove(item, dragTime, newGroupOrder);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resizingItem\", function (item, resizeTime, edge) {\n      _this.setState({\n        resizingItem: item,\n        resizingEdge: edge,\n        resizeTime: resizeTime\n      });\n\n      _this.updatingItem({\n        eventType: 'resize',\n        itemId: item,\n        time: resizeTime,\n        edge: edge\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resizedItem\", function (item, resizeTime, edge, timeDelta) {\n      _this.setState({\n        resizingItem: null,\n        resizingEdge: null,\n        resizeTime: null\n      });\n\n      if (_this.props.onItemResize && timeDelta !== 0) {\n        _this.props.onItemResize(item, resizeTime, edge);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updatingItem\", function (_ref) {\n      var eventType = _ref.eventType,\n          itemId = _ref.itemId,\n          time = _ref.time,\n          edge = _ref.edge,\n          newGroupOrder = _ref.newGroupOrder;\n\n      if (_this.props.onItemDrag) {\n        _this.props.onItemDrag({\n          eventType: eventType,\n          itemId: itemId,\n          time: time,\n          edge: edge,\n          newGroupOrder: newGroupOrder\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleRowClick\", function (e, rowIndex) {\n      // shouldnt this be handled by the user, as far as when to deselect an item?\n      if (_this.hasSelectedItem()) {\n        _this.selectItem(null);\n      }\n\n      if (_this.props.onCanvasClick == null) return;\n\n      var time = _this.getTimeFromRowClickEvent(e);\n\n      var groupId = (0, _generic._get)(_this.props.groups[rowIndex], _this.props.keys.groupIdKey);\n\n      _this.props.onCanvasClick(groupId, time, e);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleRowDoubleClick\", function (e, rowIndex) {\n      if (_this.props.onCanvasDoubleClick == null) return;\n\n      var time = _this.getTimeFromRowClickEvent(e);\n\n      var groupId = (0, _generic._get)(_this.props.groups[rowIndex], _this.props.keys.groupIdKey);\n\n      _this.props.onCanvasDoubleClick(groupId, time, e);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleScrollContextMenu\", function (e, rowIndex) {\n      if (_this.props.onCanvasContextMenu == null) return;\n\n      var timePosition = _this.getTimeFromRowClickEvent(e);\n\n      var groupId = (0, _generic._get)(_this.props.groups[rowIndex], _this.props.keys.groupIdKey);\n\n      if (_this.props.onCanvasContextMenu) {\n        e.preventDefault();\n\n        _this.props.onCanvasContextMenu(groupId, timePosition, e);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleHeaderRef\", function (el) {\n      _this.scrollHeaderRef = el;\n\n      _this.props.headerRef(el);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isTimelineHeader\", function (child) {\n      if (child.type === undefined) return false;\n      return child.type.secretKey === _TimelineHeaders[\"default\"].secretKey;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderHeaders\", function () {\n      if (_this.props.children) {\n        var headerRenderer;\n\n        _react[\"default\"].Children.map(_this.props.children, function (child) {\n          if (_this.isTimelineHeader(child)) {\n            headerRenderer = child;\n          }\n        });\n\n        if (headerRenderer) {\n          return headerRenderer;\n        }\n      }\n\n      return _react[\"default\"].createElement(_TimelineHeaders[\"default\"], null, _react[\"default\"].createElement(_DateHeader[\"default\"], {\n        unit: \"primaryHeader\"\n      }), _react[\"default\"].createElement(_DateHeader[\"default\"], null));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getScrollElementRef\", function (el) {\n      _this.props.scrollRef(el);\n\n      _this.scrollComponent = el;\n    });\n\n    _this.getSelected = _this.getSelected.bind(_assertThisInitialized(_this));\n    _this.hasSelectedItem = _this.hasSelectedItem.bind(_assertThisInitialized(_this));\n    _this.isItemSelected = _this.isItemSelected.bind(_assertThisInitialized(_this));\n    var _visibleTimeStart = null;\n    var _visibleTimeEnd = null;\n\n    if (_this.props.defaultTimeStart && _this.props.defaultTimeEnd) {\n      _visibleTimeStart = _this.props.defaultTimeStart.valueOf();\n      _visibleTimeEnd = _this.props.defaultTimeEnd.valueOf();\n    } else if (_this.props.visibleTimeStart && _this.props.visibleTimeEnd) {\n      _visibleTimeStart = _this.props.visibleTimeStart;\n      _visibleTimeEnd = _this.props.visibleTimeEnd;\n    } else {\n      //throwing an error because neither default or visible time props provided\n      throw new Error('You must provide either \"defaultTimeStart\" and \"defaultTimeEnd\" or \"visibleTimeStart\" and \"visibleTimeEnd\" to initialize the Timeline');\n    }\n\n    var _getCanvasBoundariesF = (0, _calendar.getCanvasBoundariesFromVisibleTime)(_visibleTimeStart, _visibleTimeEnd, _props.buffer),\n        _getCanvasBoundariesF2 = _slicedToArray(_getCanvasBoundariesF, 2),\n        _canvasTimeStart = _getCanvasBoundariesF2[0],\n        _canvasTimeEnd = _getCanvasBoundariesF2[1];\n\n    _this.state = {\n      width: 1000,\n      visibleTimeStart: _visibleTimeStart,\n      visibleTimeEnd: _visibleTimeEnd,\n      canvasTimeStart: _canvasTimeStart,\n      canvasTimeEnd: _canvasTimeEnd,\n      selectedItem: null,\n      dragTime: null,\n      dragGroupTitle: null,\n      resizeTime: null,\n      resizingItem: null,\n      resizingEdge: null\n    };\n\n    var _canvasWidth = (0, _calendar.getCanvasWidth)(_this.state.width, _props.buffer);\n\n    var _stackTimelineItems2 = (0, _calendar.stackTimelineItems)(_props.items, _props.groups, _canvasWidth, _this.state.canvasTimeStart, _this.state.canvasTimeEnd, _props.keys, _props.lineHeight, _props.itemHeightRatio, _props.stackItems, _this.state.draggingItem, _this.state.resizingItem, _this.state.dragTime, _this.state.resizingEdge, _this.state.resizeTime, _this.state.newGroupOrder),\n        _dimensionItems = _stackTimelineItems2.dimensionItems,\n        _height = _stackTimelineItems2.height,\n        _groupHeights = _stackTimelineItems2.groupHeights,\n        _groupTops = _stackTimelineItems2.groupTops;\n    /* eslint-disable react/no-direct-mutation-state */\n\n\n    _this.state.dimensionItems = _dimensionItems;\n    _this.state.height = _height;\n    _this.state.groupHeights = _groupHeights;\n    _this.state.groupTops = _groupTops;\n    /* eslint-enable */\n\n    return _this;\n  }\n\n  _createClass(ReactCalendarTimeline, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.resize(this.props);\n\n      if (this.props.resizeDetector && this.props.resizeDetector.addListener) {\n        this.props.resizeDetector.addListener(this);\n      }\n\n      _window[\"default\"].addListener(this);\n\n      this.lastTouchDistance = null;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.props.resizeDetector && this.props.resizeDetector.addListener) {\n        this.props.resizeDetector.removeListener(this);\n      }\n\n      _window[\"default\"].removeListener(this);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var newZoom = this.state.visibleTimeEnd - this.state.visibleTimeStart;\n      var oldZoom = prevState.visibleTimeEnd - prevState.visibleTimeStart; // are we changing zoom? Report it!\n\n      if (this.props.onZoom && newZoom !== oldZoom) {\n        this.props.onZoom(this.getTimelineContext(), this.getTimelineUnit());\n      } // The bounds have changed? Report it!\n\n\n      if (this.props.onBoundsChange && this.state.canvasTimeStart !== prevState.canvasTimeStart) {\n        this.props.onBoundsChange(this.state.canvasTimeStart, this.state.canvasTimeStart + newZoom * 3);\n      } // Check the scroll is correct\n\n\n      var scrollLeft = Math.round(this.state.width * (this.state.visibleTimeStart - this.state.canvasTimeStart) / newZoom);\n      var componentScrollLeft = Math.round(prevState.width * (prevState.visibleTimeStart - prevState.canvasTimeStart) / oldZoom);\n\n      if (componentScrollLeft !== scrollLeft) {\n        this.scrollComponent.scrollLeft = scrollLeft;\n        this.scrollHeaderRef.scrollLeft = scrollLeft;\n      }\n    }\n  }, {\n    key: \"columns\",\n    value: function columns(canvasTimeStart, canvasTimeEnd, canvasWidth, minUnit, timeSteps, height) {\n      return _react[\"default\"].createElement(_Columns[\"default\"], {\n        canvasTimeStart: canvasTimeStart,\n        canvasTimeEnd: canvasTimeEnd,\n        canvasWidth: canvasWidth,\n        lineCount: (0, _generic._length)(this.props.groups),\n        minUnit: minUnit,\n        timeSteps: timeSteps,\n        height: height,\n        verticalLineClassNamesForTime: this.props.verticalLineClassNamesForTime\n      });\n    }\n  }, {\n    key: \"rows\",\n    value: function rows(canvasWidth, groupHeights, groups) {\n      return _react[\"default\"].createElement(_GroupRows[\"default\"], {\n        groups: groups,\n        canvasWidth: canvasWidth,\n        lineCount: (0, _generic._length)(this.props.groups),\n        groupHeights: groupHeights,\n        clickTolerance: this.props.clickTolerance,\n        onRowClick: this.handleRowClick,\n        onRowDoubleClick: this.handleRowDoubleClick,\n        horizontalLineClassNamesForGroup: this.props.horizontalLineClassNamesForGroup,\n        onRowContextClick: this.handleScrollContextMenu\n      });\n    }\n  }, {\n    key: \"items\",\n    value: function items(canvasTimeStart, zoom, canvasTimeEnd, canvasWidth, minUnit, dimensionItems, groupHeights, groupTops) {\n      return _react[\"default\"].createElement(_Items[\"default\"], {\n        canvasTimeStart: canvasTimeStart,\n        canvasTimeEnd: canvasTimeEnd,\n        canvasWidth: canvasWidth,\n        dimensionItems: dimensionItems,\n        groupTops: groupTops,\n        items: this.props.items,\n        groups: this.props.groups,\n        keys: this.props.keys,\n        selectedItem: this.state.selectedItem,\n        dragSnap: this.props.dragSnap,\n        minResizeWidth: this.props.minResizeWidth,\n        canChangeGroup: this.props.canChangeGroup,\n        canMove: this.props.canMove,\n        canResize: this.props.canResize,\n        useResizeHandle: this.props.useResizeHandle,\n        canSelect: this.props.canSelect,\n        moveResizeValidator: this.props.moveResizeValidator,\n        itemSelect: this.selectItem,\n        itemDrag: this.dragItem,\n        itemDrop: this.dropItem,\n        onItemDoubleClick: this.doubleClickItem,\n        onItemContextMenu: this.props.onItemContextMenu ? this.contextMenuClickItem : undefined,\n        itemResizing: this.resizingItem,\n        itemResized: this.resizedItem,\n        itemRenderer: this.props.itemRenderer,\n        selected: this.props.selected,\n        scrollRef: this.scrollComponent\n      });\n    }\n  }, {\n    key: \"sidebar\",\n    value: function sidebar(height, groupHeights) {\n      var sidebarWidth = this.props.sidebarWidth;\n      return sidebarWidth && _react[\"default\"].createElement(_Sidebar[\"default\"], {\n        groups: this.props.groups,\n        groupRenderer: this.props.groupRenderer,\n        keys: this.props.keys,\n        width: sidebarWidth,\n        groupHeights: groupHeights,\n        height: height\n      });\n    }\n  }, {\n    key: \"rightSidebar\",\n    value: function rightSidebar(height, groupHeights) {\n      var rightSidebarWidth = this.props.rightSidebarWidth;\n      return rightSidebarWidth && _react[\"default\"].createElement(_Sidebar[\"default\"], {\n        groups: this.props.groups,\n        keys: this.props.keys,\n        groupRenderer: this.props.groupRenderer,\n        isRightSidebar: true,\n        width: rightSidebarWidth,\n        groupHeights: groupHeights,\n        height: height\n      });\n    }\n    /**\n     * check if child of type TimelineHeader\n     * refer to for explanation https://github.com/gaearon/react-hot-loader#checking-element-types\n     */\n\n  }, {\n    key: \"childrenWithProps\",\n    value: function childrenWithProps(canvasTimeStart, canvasTimeEnd, canvasWidth, dimensionItems, groupHeights, groupTops, height, visibleTimeStart, visibleTimeEnd, minUnit, timeSteps) {\n      var _this3 = this;\n\n      if (!this.props.children) {\n        return null;\n      } // convert to an array and remove the nulls\n\n\n      var childArray = Array.isArray(this.props.children) ? this.props.children.filter(function (c) {\n        return c;\n      }) : [this.props.children];\n      var childProps = {\n        canvasTimeStart: canvasTimeStart,\n        canvasTimeEnd: canvasTimeEnd,\n        canvasWidth: canvasWidth,\n        visibleTimeStart: visibleTimeStart,\n        visibleTimeEnd: visibleTimeEnd,\n        dimensionItems: dimensionItems,\n        items: this.props.items,\n        groups: this.props.groups,\n        keys: this.props.keys,\n        groupHeights: groupHeights,\n        groupTops: groupTops,\n        selected: this.getSelected(),\n        height: height,\n        minUnit: minUnit,\n        timeSteps: timeSteps\n      };\n      return _react[\"default\"].Children.map(childArray, function (child) {\n        if (!_this3.isTimelineHeader(child)) {\n          return _react[\"default\"].cloneElement(child, childProps);\n        } else {\n          return null;\n        }\n      });\n    }\n  }, {\n    key: \"getSelected\",\n    value: function getSelected() {\n      return this.state.selectedItem && !this.props.selected ? [this.state.selectedItem] : this.props.selected || [];\n    }\n  }, {\n    key: \"hasSelectedItem\",\n    value: function hasSelectedItem() {\n      if (!Array.isArray(this.props.selected)) return !!this.state.selectedItem;\n      return this.props.selected.length > 0;\n    }\n  }, {\n    key: \"isItemSelected\",\n    value: function isItemSelected(itemId) {\n      var selectedItems = this.getSelected();\n      return selectedItems.some(function (i) {\n        return i === itemId;\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$props3 = this.props,\n          items = _this$props3.items,\n          groups = _this$props3.groups,\n          sidebarWidth = _this$props3.sidebarWidth,\n          rightSidebarWidth = _this$props3.rightSidebarWidth,\n          timeSteps = _this$props3.timeSteps,\n          traditionalZoom = _this$props3.traditionalZoom,\n          buffer = _this$props3.buffer;\n      var _this$state5 = this.state,\n          draggingItem = _this$state5.draggingItem,\n          resizingItem = _this$state5.resizingItem,\n          width = _this$state5.width,\n          visibleTimeStart = _this$state5.visibleTimeStart,\n          visibleTimeEnd = _this$state5.visibleTimeEnd,\n          canvasTimeStart = _this$state5.canvasTimeStart,\n          canvasTimeEnd = _this$state5.canvasTimeEnd;\n      var _this$state6 = this.state,\n          dimensionItems = _this$state6.dimensionItems,\n          height = _this$state6.height,\n          groupHeights = _this$state6.groupHeights,\n          groupTops = _this$state6.groupTops;\n      var zoom = visibleTimeEnd - visibleTimeStart;\n      var canvasWidth = (0, _calendar.getCanvasWidth)(width, buffer);\n      var minUnit = (0, _calendar.getMinUnit)(zoom, width, timeSteps);\n      var isInteractingWithItem = !!draggingItem || !!resizingItem;\n\n      if (isInteractingWithItem) {\n        var stackResults = (0, _calendar.stackTimelineItems)(items, groups, canvasWidth, this.state.canvasTimeStart, this.state.canvasTimeEnd, this.props.keys, this.props.lineHeight, this.props.itemHeightRatio, this.props.stackItems, this.state.draggingItem, this.state.resizingItem, this.state.dragTime, this.state.resizingEdge, this.state.resizeTime, this.state.newGroupOrder);\n        dimensionItems = stackResults.dimensionItems;\n        height = stackResults.height;\n        groupHeights = stackResults.groupHeights;\n        groupTops = stackResults.groupTops;\n      }\n\n      var outerComponentStyle = {\n        height: \"\".concat(height, \"px\")\n      };\n      return _react[\"default\"].createElement(_TimelineStateContext.TimelineStateProvider, {\n        visibleTimeStart: visibleTimeStart,\n        visibleTimeEnd: visibleTimeEnd,\n        canvasTimeStart: canvasTimeStart,\n        canvasTimeEnd: canvasTimeEnd,\n        canvasWidth: canvasWidth,\n        showPeriod: this.showPeriod,\n        timelineUnit: minUnit,\n        timelineWidth: this.state.width\n      }, _react[\"default\"].createElement(_TimelineMarkersContext.TimelineMarkersProvider, null, _react[\"default\"].createElement(_HeadersContext.TimelineHeadersProvider, {\n        registerScroll: this.handleHeaderRef,\n        timeSteps: timeSteps,\n        leftSidebarWidth: this.props.sidebarWidth,\n        rightSidebarWidth: this.props.rightSidebarWidth\n      }, _react[\"default\"].createElement(\"div\", {\n        style: this.props.style,\n        ref: function ref(el) {\n          return _this4.container = el;\n        },\n        className: \"react-calendar-timeline \".concat(this.props.className)\n      }, this.renderHeaders(), _react[\"default\"].createElement(\"div\", {\n        style: outerComponentStyle,\n        className: \"rct-outer\"\n      }, sidebarWidth > 0 ? this.sidebar(height, groupHeights) : null, _react[\"default\"].createElement(_ScrollElement[\"default\"], {\n        scrollRef: this.getScrollElementRef,\n        width: width,\n        height: height,\n        onZoom: this.changeZoom,\n        onWheelZoom: this.handleWheelZoom,\n        traditionalZoom: traditionalZoom,\n        onScroll: this.onScroll,\n        isInteractingWithItem: isInteractingWithItem\n      }, _react[\"default\"].createElement(_MarkerCanvas[\"default\"], null, this.columns(canvasTimeStart, canvasTimeEnd, canvasWidth, minUnit, timeSteps, height), this.rows(canvasWidth, groupHeights, groups), this.items(canvasTimeStart, zoom, canvasTimeEnd, canvasWidth, minUnit, dimensionItems, groupHeights, groupTops), this.childrenWithProps(canvasTimeStart, canvasTimeEnd, canvasWidth, dimensionItems, groupHeights, groupTops, height, visibleTimeStart, visibleTimeEnd, minUnit, timeSteps))), rightSidebarWidth > 0 ? this.rightSidebar(height, groupHeights) : null)))));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var visibleTimeStart = nextProps.visibleTimeStart,\n          visibleTimeEnd = nextProps.visibleTimeEnd,\n          items = nextProps.items,\n          groups = nextProps.groups; // This is a gross hack pushing items and groups in to state only to allow\n      // For the forceUpdate check\n\n      var derivedState = {\n        items: items,\n        groups: groups // if the items or groups have changed we must re-render\n\n      };\n      var forceUpdate = items !== prevState.items || groups !== prevState.groups; // We are a controlled component\n\n      if (visibleTimeStart && visibleTimeEnd) {\n        // Get the new canvas position\n        Object.assign(derivedState, (0, _calendar.calculateScrollCanvas)(visibleTimeStart, visibleTimeEnd, forceUpdate, items, groups, nextProps, prevState));\n      } else if (forceUpdate) {\n        // Calculate new item stack position as canvas may have changed\n        var canvasWidth = (0, _calendar.getCanvasWidth)(prevState.width, nextProps.buffer);\n        Object.assign(derivedState, (0, _calendar.stackTimelineItems)(items, groups, canvasWidth, prevState.canvasTimeStart, prevState.canvasTimeEnd, nextProps.keys, nextProps.lineHeight, nextProps.itemHeightRatio, nextProps.stackItems, prevState.draggingItem, prevState.resizingItem, prevState.dragTime, prevState.resizingEdge, prevState.resizeTime, prevState.newGroupOrder));\n      }\n\n      return derivedState;\n    }\n  }]);\n\n  return ReactCalendarTimeline;\n}(_react.Component);\n\nexports[\"default\"] = ReactCalendarTimeline;\n\n_defineProperty(ReactCalendarTimeline, \"propTypes\", {\n  groups: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].array, _propTypes[\"default\"].object]).isRequired,\n  items: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].array, _propTypes[\"default\"].object]).isRequired,\n  sidebarWidth: _propTypes[\"default\"].number,\n  rightSidebarWidth: _propTypes[\"default\"].number,\n  dragSnap: _propTypes[\"default\"].number,\n  minResizeWidth: _propTypes[\"default\"].number,\n  lineHeight: _propTypes[\"default\"].number,\n  itemHeightRatio: _propTypes[\"default\"].number,\n  minZoom: _propTypes[\"default\"].number,\n  maxZoom: _propTypes[\"default\"].number,\n  buffer: _propTypes[\"default\"].number,\n  clickTolerance: _propTypes[\"default\"].number,\n  canChangeGroup: _propTypes[\"default\"].bool,\n  canMove: _propTypes[\"default\"].bool,\n  canResize: _propTypes[\"default\"].oneOf([true, false, 'left', 'right', 'both']),\n  useResizeHandle: _propTypes[\"default\"].bool,\n  canSelect: _propTypes[\"default\"].bool,\n  stackItems: _propTypes[\"default\"].bool,\n  traditionalZoom: _propTypes[\"default\"].bool,\n  itemTouchSendsClick: _propTypes[\"default\"].bool,\n  horizontalLineClassNamesForGroup: _propTypes[\"default\"].func,\n  onItemMove: _propTypes[\"default\"].func,\n  onItemResize: _propTypes[\"default\"].func,\n  onItemClick: _propTypes[\"default\"].func,\n  onItemSelect: _propTypes[\"default\"].func,\n  onItemDeselect: _propTypes[\"default\"].func,\n  onCanvasClick: _propTypes[\"default\"].func,\n  onItemDoubleClick: _propTypes[\"default\"].func,\n  onItemContextMenu: _propTypes[\"default\"].func,\n  onCanvasDoubleClick: _propTypes[\"default\"].func,\n  onCanvasContextMenu: _propTypes[\"default\"].func,\n  onZoom: _propTypes[\"default\"].func,\n  onItemDrag: _propTypes[\"default\"].func,\n  moveResizeValidator: _propTypes[\"default\"].func,\n  itemRenderer: _propTypes[\"default\"].func,\n  groupRenderer: _propTypes[\"default\"].func,\n  className: _propTypes[\"default\"].string,\n  style: _propTypes[\"default\"].object,\n  keys: _propTypes[\"default\"].shape({\n    groupIdKey: _propTypes[\"default\"].string,\n    groupTitleKey: _propTypes[\"default\"].string,\n    groupLabelKey: _propTypes[\"default\"].string,\n    groupRightTitleKey: _propTypes[\"default\"].string,\n    itemIdKey: _propTypes[\"default\"].string,\n    itemTitleKey: _propTypes[\"default\"].string,\n    itemDivTitleKey: _propTypes[\"default\"].string,\n    itemGroupKey: _propTypes[\"default\"].string,\n    itemTimeStartKey: _propTypes[\"default\"].string,\n    itemTimeEndKey: _propTypes[\"default\"].string\n  }),\n  headerRef: _propTypes[\"default\"].func,\n  scrollRef: _propTypes[\"default\"].func,\n  timeSteps: _propTypes[\"default\"].shape({\n    second: _propTypes[\"default\"].number,\n    minute: _propTypes[\"default\"].number,\n    hour: _propTypes[\"default\"].number,\n    day: _propTypes[\"default\"].number,\n    month: _propTypes[\"default\"].number,\n    year: _propTypes[\"default\"].number\n  }),\n  defaultTimeStart: _propTypes[\"default\"].object,\n  defaultTimeEnd: _propTypes[\"default\"].object,\n  visibleTimeStart: _propTypes[\"default\"].number,\n  visibleTimeEnd: _propTypes[\"default\"].number,\n  onTimeChange: _propTypes[\"default\"].func,\n  onBoundsChange: _propTypes[\"default\"].func,\n  selected: _propTypes[\"default\"].array,\n  resizeDetector: _propTypes[\"default\"].shape({\n    addListener: _propTypes[\"default\"].func,\n    removeListener: _propTypes[\"default\"].func\n  }),\n  verticalLineClassNamesForTime: _propTypes[\"default\"].func,\n  children: _propTypes[\"default\"].node\n});\n\n_defineProperty(ReactCalendarTimeline, \"defaultProps\", {\n  sidebarWidth: 150,\n  rightSidebarWidth: 0,\n  dragSnap: 1000 * 60 * 15,\n  // 15min\n  minResizeWidth: 20,\n  lineHeight: 30,\n  itemHeightRatio: 0.65,\n  buffer: 3,\n  minZoom: 60 * 60 * 1000,\n  // 1 hour\n  maxZoom: 5 * 365.24 * 86400 * 1000,\n  // 5 years\n  clickTolerance: 3,\n  // how many pixels can we drag for it to be still considered a click?\n  canChangeGroup: true,\n  canMove: true,\n  canResize: 'right',\n  useResizeHandle: false,\n  canSelect: true,\n  stackItems: false,\n  traditionalZoom: false,\n  horizontalLineClassNamesForGroup: null,\n  onItemMove: null,\n  onItemResize: null,\n  onItemClick: null,\n  onItemSelect: null,\n  onItemDeselect: null,\n  onItemDrag: null,\n  onCanvasClick: null,\n  onItemDoubleClick: null,\n  onItemContextMenu: null,\n  onZoom: null,\n  verticalLineClassNamesForTime: null,\n  moveResizeValidator: null,\n  dayBackground: null,\n  defaultTimeStart: null,\n  defaultTimeEnd: null,\n  itemTouchSendsClick: false,\n  style: {},\n  className: '',\n  keys: _defaultConfig.defaultKeys,\n  timeSteps: _defaultConfig.defaultTimeSteps,\n  headerRef: function headerRef() {},\n  scrollRef: function scrollRef() {},\n  // if you pass in visibleTimeStart and visibleTimeEnd, you must also pass onTimeChange(visibleTimeStart, visibleTimeEnd),\n  // which needs to update the props visibleTimeStart and visibleTimeEnd to the ones passed\n  visibleTimeStart: null,\n  visibleTimeEnd: null,\n  onTimeChange: function onTimeChange(visibleTimeStart, visibleTimeEnd, updateScrollCanvas) {\n    updateScrollCanvas(visibleTimeStart, visibleTimeEnd);\n  },\n  // called when the canvas area of the calendar changes\n  onBoundsChange: null,\n  children: null,\n  selected: null\n});\n\n_defineProperty(ReactCalendarTimeline, \"childContextTypes\", {\n  getTimelineContext: _propTypes[\"default\"].func\n});"]},"metadata":{},"sourceType":"script"}